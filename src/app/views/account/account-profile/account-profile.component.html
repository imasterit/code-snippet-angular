<section>

    <header class="sidebarHeader">
        <h2 class="mat-h2 ellipsis">Update Profile</h2>
        <i class="far fa-times" (click)="sidenavService.toggle('right')"></i>
    </header>

    <form name="formProfile" id="formProfile" [formGroup]="formProfile" (ngSubmit)="submit()">
        <input type="hidden" formControlName="id" required>
        <fieldset>
            <h3 class="mat-h3">Account</h3>
            <mat-form-field appearance="fill"><mat-label>Email</mat-label><input matInput type="email" formControlName="email" required></mat-form-field>
            <mat-form-field appearance="fill"><mat-label>Username</mat-label><input matInput type="text" formControlName="username" required></mat-form-field>
        </fieldset>
        <fieldset>
            <h3 class="mat-h3">Personal</h3>
            <mat-form-field appearance="fill"><mat-label>First Name</mat-label><input matInput type="text" formControlName="first_name" required></mat-form-field>
            <mat-form-field appearance="fill"><mat-label>Last Name</mat-label><input matInput type="text" formControlName="last_name" required></mat-form-field>
            <ng-container formGroupName="phone_number">
                <input type="hidden" formControlName="id" required>
                <mat-form-field appearance="fill"><mat-label>Phone Number</mat-label><input matInput type="number" formControlName="number" required></mat-form-field>
            </ng-container>
        </fieldset>
        <fieldset formGroupName="address">
            <h3 class="mat-h3">Location</h3>
            <input type="hidden" formControlName="id" required>
            <mat-form-field appearance="fill"><mat-label>Address Line 1</mat-label><input matInput type="text" formControlName="address_line_1" required></mat-form-field>
            <mat-form-field appearance="fill"><mat-label>Address Line 2</mat-label><input matInput type="text" formControlName="address_line_2"></mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label>Country</mat-label>
                <mat-select (selectionChange)="updateStateProvinceSelect($event.value)" placeholder="Select" formControlName="country_id" required>
                    <mat-option *ngFor="let c of countries; index as i" [value]="c.id">{{c.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill" *ngIf="statesFiltered.length > 0">
                <mat-label>State / Province</mat-label>
                <mat-select placeholder="Select" formControlName="state_id" required>
                    <mat-option *ngFor="let s of statesFiltered; index as i" [value]="s.id">{{s.name}}</mat-option>
                </mat-select>
            </mat-form-field>
            <!-- / -->
            <mat-form-field appearance="fill"><mat-label>City</mat-label><input matInput type="text" formControlName="city" required></mat-form-field>
            <mat-form-field appearance="fill"><mat-label>Zip / Postal Code</mat-label><input matInput type="text" formControlName="zip" required></mat-form-field>
        </fieldset>
        <fieldset>
            <button mat-raised-button type="submit" color="primary" [disabled]="!formProfile.valid">Update</button>
        </fieldset>
    </form>

    <!-- <pre>{{formProfile.value | json}}</pre><br> -->
</section>
